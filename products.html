<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Products â€“ Calm Corner</title>
  <link rel="stylesheet" href="styles.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
</head>
<body>
  <header> 
    <a href="index.html" class="logo">
      <img src="LOGO.png" alt="Logo">
    </a>
    <nav>
      <ul>
        <li><a href="index.html">HOME</a></li> 
        <li><a href="products.html" class="active">PRODUCTS</a></li> 
        <li><a href="video-guidelines.html">VIDEO GUIDES</a></li> 
        <li><a href="about-us.html">ABOUT US</a></li> 
      </ul>
    </nav>
  </header>

  <main>
    <a href="#" class="cart-button" id="cartBtn">
      <img src="cart-logo.jpg" alt="Cart">
      <span class="cart-count" id="cartCount">0</span>
    </a>

    <div class="toast" id="toast">Item added to cart!</div>

    <h1>~ Calm Corner ~</h1>
    <p class="description">Explore our relaxing self-care tools</p>
    <p class="categories">Stress Reliever Products</p>

    <div class="product-grid">
      <div class="product" data-description="A soft, squeezable ball that helps relieve stress and anxiety by keeping your hands busy and your mind calm.">
        <img src="squish-balls.jpg">
        <h3>Squishy Ball</h3>
        <p>â‚±99</p>
        <button class="add-to-cart">Add to Cart</button>
      </div>
      <div class="product" data-description="A compact cube with buttons, switches, and rollers designed to reduce stress and enhance focus through tactile interaction.">
        <img src="fidget-cube.jpg">
        <h3>Fidget Cube</h3>
        <p>â‚±119</p>
        <button class="add-to-cart">Add to Cart</button>
      </div>
      <div class="product" data-description="A simple yet meaningful bracelet that serves as a gentle reminder to pause, breathe, and stay present throughout your day.">
        <img src="bracelet.jpg">
        <h3>Mindfulness Bracelet</h3>
        <p>â‚±49</p>
        <button class="add-to-cart">Add to Cart</button>
      </div>
    </div>

    <p class="categories">Aromatherapy Items</p>
    <div class="product-grid">
      <div class="product" data-description="A soothing bath bomb infused with essential oils that fizz and release calming scents, perfect for a relaxing soak.">
        <img src="bath-bomb.jpg">
        <h3>Bath Bomb</h3>
        <p>â‚±199</p>
        <button class="add-to-cart">Add to Cart</button>
      </div>
      <div class="product" data-description="An invigorating green mint essential oil that promotes mental clarity and helps ease feelings of fatigue and tension.">
        <img src="green-mint.jpg">
        <h3>Green Mint Oil</h3>
        <p>â‚±499</p>
        <button class="add-to-cart">Add to Cart</button>
      </div>
      <div class="product" data-description="A convenient nasal inhaler that delivers instant relief through a blend of calming scents, helping ease anxiety and nausea.">
        <img src="inhaler.jpg">
        <h3>Inhaler</h3>
        <p>â‚±99</p>
        <button class="add-to-cart">Add to Cart</button>
      </div>
    </div>
  </main>

  <footer>
    <p>2025 Wall of Thoughts. You are not alone.</p>
  </footer>

  <!-- Slide-out Cart Panel -->
  <div id="cartPanel" class="cart-panel">
    <div class="cart-header">
      <h3>Your Cart</h3>
      <button id="closeCart">X</button>
    </div>
    <div class="cart-items" id="cartItems"></div>
    <p id="cartTotal" style="font-weight: bold; margin-top: 10px;"></p>

    <form id="checkoutForm" class="checkout-form">
      <h4>Checkout Info</h4>
      <input type="text" id="customerName" placeholder="Your Name" required>
      <input type="text" id="contactNumber" placeholder="Contact Number" required>
      <textarea id="address" placeholder="Delivery Address" required></textarea>
      <button type="submit">Submit Order</button>
    </form>
  </div>

  <!-- Product Modal -->
  <div class="product-modal" id="productModal">
    <div class="product-modal-content">
      <span class="close-modal" id="closeModal">X</span>
      <img id="modalImage" src="" alt="Product Image">
      <h3 id="modalName"></h3>
      <p id="modalPrice"></p>
      <p id="modalDescription"></p>
      <button id="modalAddToCart">Add to Cart</button>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    const cartBtn = document.getElementById("cartBtn");
    const cartPanel = document.getElementById("cartPanel");
    const closeCart = document.getElementById("closeCart");
    const cartItemsContainer = document.getElementById("cartItems");
    const cartCountEl = document.getElementById("cartCount");
    const productModal = document.getElementById("productModal");
    const modalImage = document.getElementById("modalImage");
    const modalName = document.getElementById("modalName");
    const modalPrice = document.getElementById("modalPrice");
    const modalDescription = document.getElementById("modalDescription");
    const modalAddToCart = document.getElementById("modalAddToCart");
    const closeModal = document.getElementById("closeModal");

    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    let selectedProduct = {};

    function updateCartCount() {
      const count = cart.reduce((total, item) => total + item.quantity, 0);
      cartCountEl.textContent = count;
    }

    function renderCart() {
      cartItemsContainer.innerHTML = "";
      if (cart.length === 0) {
        cartItemsContainer.innerHTML = "<p>Your cart is empty.</p>";
        document.getElementById("cartTotal").textContent = "";
        return;
      }

      cart.forEach((item, index) => {
        const div = document.createElement("div");
        div.classList.add("cart-item");
        div.innerHTML = `
          <strong>${item.name}</strong><br>
          â‚±${item.price} x 
          <input type="number" min="1" value="${item.quantity}" data-index="${index}" class="quantity">
          = â‚±${item.price * item.quantity}
          <button class="remove-item" data-index="${index}">ðŸ—‘</button>
        `;
        cartItemsContainer.appendChild(div);
      });

      const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
      document.getElementById("cartTotal").textContent = `Total: â‚±${total.toFixed(2)}`;
    }

    function showToast(message) {
      const toast = document.getElementById("toast");
      toast.textContent = message;
      toast.classList.add("show");
      setTimeout(() => toast.classList.remove("show"), 1500);
    }

    cartBtn.addEventListener("click", (e) => {
      e.preventDefault();
      renderCart();
      cartPanel.style.right = "0";
    });

    closeCart.addEventListener("click", () => {
      cartPanel.style.right = "-400px";
    });

    document.querySelectorAll(".product button").forEach(button => {
      button.addEventListener("click", (e) => {
        e.stopPropagation(); // prevent modal opening when button clicked
        const card = button.closest(".product");
        const name = card.querySelector("h3").innerText;
        const price = parseFloat(card.querySelector("p").innerText.replace("â‚±", ""));
        const existing = cart.find(i => i.name === name);
        if (existing) {
          existing.quantity++;
        } else {
          cart.push({ name, price, quantity: 1 });
        }
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartCount();
        renderCart();
        showToast(`${name} added to cart!`);
      });
    });

    cartItemsContainer.addEventListener("input", (e) => {
      if (e.target.classList.contains("quantity")) {
        const index = e.target.dataset.index;
        cart[index].quantity = parseInt(e.target.value);
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartCount();
        renderCart();
      }
    });

    cartItemsContainer.addEventListener("click", (e) => {
      if (e.target.classList.contains("remove-item")) {
        const index = e.target.dataset.index;
        cart.splice(index, 1);
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartCount();
        renderCart();
      }
    });

    document.getElementById("checkoutForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const name = document.getElementById("customerName").value.trim();
      const contact = document.getElementById("contactNumber").value.trim();
      const address = document.getElementById("address").value.trim();

      if (!name || !contact || !address) {
        alert("Please fill out all fields.");
        return;
      }

      alert(`Thank you, ${name}! Your order has been placed.`);
      cart = [];
      localStorage.setItem("cart", JSON.stringify(cart));
      updateCartCount();
      renderCart();
      this.reset();
    });

    // Modal logic
    document.querySelectorAll(".product").forEach(card => {
      card.addEventListener("click", () => {
        const name = card.querySelector("h3").innerText;
        const price = parseFloat(card.querySelector("p").innerText.replace("â‚±", ""));
        const image = card.querySelector("img").getAttribute("src");
        const description = card.dataset.description;

        selectedProduct = { name, price };

        modalImage.src = image;
        modalName.textContent = name;
        modalPrice.textContent = `â‚±${price}`;
        modalDescription.textContent = description;
        productModal.style.display = "flex";
      });
    });

    closeModal.addEventListener("click", () => {
      productModal.style.display = "none";
    });

    modalAddToCart.addEventListener("click", () => {
      const existing = cart.find(i => i.name === selectedProduct.name);
      if (existing) {
        existing.quantity++;
      } else {
        cart.push({ ...selectedProduct, quantity: 1 });
      }

      localStorage.setItem("cart", JSON.stringify(cart));
      updateCartCount();
      renderCart();
      showToast(`${selectedProduct.name} added to cart!`);
      productModal.style.display = "none";
    });

    updateCartCount();
  </script>
</body>
</html>
